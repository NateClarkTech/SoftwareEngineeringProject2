{% extends "base.html" %}

{% block title %}Profile{% endblock %}

{% block extra_css %}
<style>
  .profile-page {
      padding: 1rem;
  }
  .profile-picture {
      width: 150px;
      height: 150px;
      object-fit: cover;
      border-radius: 50%;
  }
  .profile-details {
      background-color: #fff;
      padding: 1rem;
      border-radius: 0.5rem;
      margin-top: 1rem;
  }
  .profile-header,
  .profile-details {
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      background-color: #fff;
  }
  .modal-footer {
      border-top: none;
  }
  @media (max-width: 768px) {
      .profile-picture {
          width: 120px; /* Smaller profile picture on mobile */
          height: 120px;
      }
      .profile-header {
          padding: 0.5rem;
      }
      .profile-details p {
          font-size: 0.9rem; /* Smaller text on mobile */
      }
  }
  
</style>
{% endblock %}

{% block content %}
<div class="container profile-container">
    <div class="profile-header text-center">
        <div>
            {% if profile.profile_picture %}
                <img src="{{ profile.profile_picture.url }}" alt="Profile Picture" class="profile-image img-fluid mx-auto d-block">
            {% endif %}
        </div>
        <h2>{{ profile.user.username }} {% if profile.graduation_year %} 
            <span class="badge bg-primary">{{ profile.graduation_year }}</span>
            {% endif %}
        </h2>
    </div>
    <div class="row">
        <div class="col-md-5">
            <div class="profile-info bg-white border rounded p-3 shadow-sm">
                <div class="profile-info">
                <h3>About</h3>
                <p>{{ profile.personal_info }}</p>
                {% if profile.hometown %}
                    <p>Hometown: {{ profile.hometown }}</p>
                {% endif %}
                {% if profile.homestate %}
                    <p>Home State: {{ profile.homestate }}</p>
                {% endif %}
                {% if profile.highschool %}
                    <p>High School: {{ profile.highschool }}</p>
                {% endif %}
                </div>
                <h3>Quick Info</h3>
                <p><strong>Dorm Preferences:</strong> {{ profile.dorm_preferences }}</p>
                <p><strong>Major:</strong> {{ profile.major }}</p>
            </div>
        </div>
        <div class="col-md-7">
            <div class="profile-info bg-white border rounded p-3 shadow-sm">
              <div class="col-12 col-lg-8">

                <div class="profile-info"><!--
                    <h3>School Information</h3>
                    {% if profile.dorm_preferences %}
                        <p><strong>Dorm Preferences: </strong>{{ profile.dorm_preferences }}</p>
                    {% endif %}
                    {% if profile.looking_for_roommate %}
                        <p>Looking for Roommate: {{ profile.looking_for_roommate|yesno:"Yes,No" }}</p>
                    {% endif %}-->
                </div>
                <div class="contact-info">
                    <h3>Contact Information</h3>
                    {% if profile.email %}
                        <p>Email: {{ profile.email }}</p>
                    {% endif %}
                    {% if profile.phone_number %}
                        <p>Phone: {{ profile.phone_number }}</p>
                    {% endif %}
                    {% if profile.snapchat %}
                        <p>Snapchat: {{ profile.snapchat }}</p>
                    {% endif %}
                    {% if profile.instagram %}
                        <p>Instagram: {{ profile.instagram }}</p>
                    {% endif %}
                </div>
                <!-- If the profile is the one currently logged in and we are on the specefic profile page and not at profile/other-->
                {% if request.user == profile.user %}
                <button type="button" class="btn btn-primary edit-profile-btn" data-bs-toggle="modal" data-bs-target="#editProfileModal">
                    Edit Profile
                </button>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<!-- Edit Profile Modal -->
<!-- Modal code remains the same as before -->

<!-- Edit Profile Modal -->
<div class="modal fade" id="editProfileModal" tabindex="-1" aria-labelledby="editProfileModalLabel" aria-hidden="true">
  <div class="modal-dialog">
      <div class="modal-content">
          <div class="modal-header">
              <h5 class="modal-title" id="editProfileModalLabel">Edit Profile</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
              <!-- Profile Edit Form -->
              <form method="POST" enctype="multipart/form-data">
                  {% csrf_token %}
                  {{ form.as_p }}
                  <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                      <button type="submit" class="btn btn-primary">Save Changes</button>
                  </div>
              </form>
          </div>
      </div>
  </div>
</div>

{% endblock %}
